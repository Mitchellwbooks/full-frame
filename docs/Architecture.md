
## Architecture Goals
- Keep each piece of the service well isolated.
  - No filesystem files should be shared between services

## Problems To Solve
- [ ] How do we identify tags generated by the AI, and tags generated by the user?
- [ ] How do we store inferences and user-changes? 
  - [ ] What should the format be?


## User Flow
```mermaid
graph LR
    subgraph filesystem 
        subgraph picture_folder
            picture_1.xml
        end
    end
    
    subgraph user_software 
        User --tags--> picture_1.xml
    end

    subgraph full-frame 
        Controller -- observes --> picture_1.xml
    end
```


## Software Communication
```mermaid
graph TB
    subgraph filesystem 
        subgraph picture_folder 
            picture_1.raw
            picture_1.xml
        end
        
        subgraph configuration_folder
            inferences.db
            user-changes.db
            model_history.db
            state.db
        end
        
        subgraph models_folder
            subgraph history 
                model_v1.json
            end
            current_model.json
        end
    end
    
    subgraph full-frame
        Controller -- observes ---> picture_1.raw
        Controller -- observes ---> picture_1.xml
        Controller -- picture.raw --> Inferencer
        Controller -- updates --> picture_1.xml
        Controller -- picture.xml --> ModelManager
        Controller -- updates --> state.db
        
        Inferencer -- predictions --> Controller
        Inferencer -- predictions --> ModelManager
        Inferencer -- load_model --> ModelManager
        
        ModelManager -- updates/loads --> inferences.db
        ModelManager -- updates/loads --> user-changes.db
        ModelManager -- model.json --> Inferencer
        ModelManager -- updates/loads --> model_history.db
        ModelManager -- updates/loads --> model_v1.json
        ModelManager -- updates/loads --> current_model.json
        
    end
```

## Data Stores
### [Inferences Store](Data_Stores%2FInferences.md)


## Class Responsibility
### [Controller](classes%2FController.md)
### [Inferencer](classes%2FInferencer.md)
### [ModelManager](classes%2FModelManager.md)


